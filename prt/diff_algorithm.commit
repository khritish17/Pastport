0000180def0generate_commit_data(old_text,1new_text,2lcs):32360抖0抖1抖2抖3#4make5sure6to7deal8with9old_text/new_text10which11are12empty([]),13becoz14line1545,1647173240抖0抖1抖2抖3#4old5text,6new7text8are9arrays10抖114140抖0抖1抖2抖3old_index4=5[]65140抖0抖1抖2抖3new_index4=5[]66200抖0抖1抖2抖3for4word,5old_ind,6new_ind7in8lcs:97180抖0抖1抖2抖3抖4抖5抖6抖7old_index.append(old_ind)88180抖0抖1抖2抖3抖4抖5抖6抖7new_index.append(new_ind)890010140抖0抖1抖2抖3insertion4=5[]611160抖0抖1抖2抖3for4i5in6range(len(new_text)):712260抖0抖1抖2抖3抖4抖5抖6抖7if8i9not10in11new_index:1213280抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11insertion.append((new_text[i],12i))13140015140抖0抖1抖2抖3deletion4=5[]616100抖0抖1抖2抖3抖417160抖0抖1抖2抖3for4i5in6range(len(old_text)):718260抖0抖1抖2抖3抖4抖5抖6抖7if8i9not10in11old_index:1219280抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11deletion.append((old_text[i],12i))1320140抖0抖1抖2抖3return4insertion,5deletion621002280def0backtracking(old_text,1new_text,2dp):323140抖0抖1抖2抖3lcs4=5[]624160抖0抖1抖2抖3if4old_text5and6new_text:725340抖0抖1抖2抖3抖4抖5抖6抖7i,8j9=10len(dp)11-121,13len(dp[0])14-1511626320抖0抖1抖2抖3抖4抖5抖6抖7while8i9!=10011and12j13!=140:1527340抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11old_word12=13old_text[i14-151]1628340抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11new_word12=13new_text[j14-151]16290030320抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11if12old_word13==14new_word:1531500抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15i,16j17=18i19-201,21j22-2312432460抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15lcs16=17[(old_word,18i,19j)]20+21lcs2233260抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11else:1234440抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15#16old17word18!=19new20word2135480抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15if16dp[i][j17-181]19>=20dp[i21-221][j]:2336460抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15抖16抖17抖18抖19j20-=2112237340抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15else:1638460抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15抖16抖17抖18抖19i20-=2112239180抖0抖1抖2抖3抖4抖5抖6抖7抖840160抖0抖1抖2抖3return4generate_commit_data(old_text,5new_text,6lcs)741220抖0抖1抖2抖3#4write5the6insertion7and8deletion9抖1042004360def0longest_common_subsequence(old_text,1new_text):244300抖0抖1抖2抖3#4old_text5and6new_text7are8just9single10lines11in12text13file1445160抖0抖1抖2抖3old_text4=5old_text.rstrip("\n").split("6")746160抖0抖1抖2抖3new_text4=5new_text.rstrip("\n").split("6")747380抖0抖1抖2抖3dp4=5[[06for7j8in9range(len(new_text)10+111)]12for13i14in15range(len(old_text)16+171)]1848220抖0抖1抖2抖3for4i5in6range(1,7len(old_text)8+91):1049300抖0抖1抖2抖3抖4抖5抖6抖7for8j9in10range(1,11len(new_text)12+131):1450420抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11old_index,12new_index13=14i15-161,17j18-1912051340抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11old_word,12new_word13=14old_text[old_index],15new_text[new_index]1652320抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11if12old_word13==14new_word:1553500抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15dp[i][j]16=17dp[i18-191][j20-211]22+2312454260抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11else:1255480抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖13抖14抖15dp[i][j]16=17max(dp[i][j18-191],20dp[i21-221][j])2356160抖0抖1抖2抖3if4old_text5==6['']:757220抖0抖1抖2抖3抖4抖5抖6抖7old_text8=9[]1058160抖0抖1抖2抖3if4new_text5==6['']:759220抖0抖1抖2抖3抖4抖5抖6抖7new_text8=9[]1060160抖0抖1抖2抖3return4backtracking(old_text,5new_text,6dp)761100抖0抖1抖2抖3抖462280抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11抖12抖1363006460def0diff_algorithm(old_file,1new_file):265260抖0抖1抖2抖3#4opening5the6old7file8in9read10mode11抖1266160抖0抖1抖2抖3old4=5open(old_file,6'r')767140抖0抖1抖2抖3old_lines4=5old.readlines()668140抖0抖1抖2抖3old_length4=5len(old_lines)669100抖0抖1抖2抖3抖470240抖0抖1抖2抖3#4opening5the6old7file8in9read10mode1171160抖0抖1抖2抖3new4=5open(new_file,6'r')772140抖0抖1抖2抖3new_lines4=5new.readlines()673140抖0抖1抖2抖3new_length4=5len(new_lines)674100抖0抖1抖2抖3抖475280抖0抖1抖2抖3#4closing5the6files,7since8we9have10scan11the12files1376280抖0抖1抖2抖3#4there5is6no7need8to9keep10the11files12open1377100抖0抖1抖2抖3old.close()478100抖0抖1抖2抖3new.close()479100抖0抖1抖2抖3抖480140抖0抖1抖2抖3commit_data4=5{}681180抖0抖1抖2抖3for4i5in6range(max(old_length,7new_length)):882180抖0抖1抖2抖3抖4抖5抖6抖7try:883300抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11old_line12=13old_lines[i]1484180抖0抖1抖2抖3抖4抖5抖6抖7except:885320抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11old_line12抖13=14""1586180抖0抖1抖2抖3抖4抖5抖6抖7抖887180抖0抖1抖2抖3抖4抖5抖6抖7try:888300抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11new_line12=13new_lines[i]1489180抖0抖1抖2抖3抖4抖5抖6抖7except:890300抖0抖1抖2抖3抖4抖5抖6抖7抖8抖9抖10抖11new_line12=13""1491180抖0抖1抖2抖3抖4抖5抖6抖7抖892240抖0抖1抖2抖3抖4抖5抖6抖7commit_data[i]8=9longest_common_subsequence(old_line,10new_line)1193120抖0抖1抖2抖3return4commit_data59460#0print(diff_algorithm('old.old',1'old.txt'))2Initial commit
10001002003004005006007008009001000110012001300140015001600170018001900200021002200230024002500260027002800290030003100320033003400350036003700380039004000410042004300440045004600470048004900500051005200530054005500560057005800590060006100620063006400650066006700680069007000710072007300740075007600770078007900800081008200830084008500860087008800890090009100920093009400Untitled Commit
